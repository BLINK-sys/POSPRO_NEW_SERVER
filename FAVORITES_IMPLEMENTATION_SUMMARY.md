# –†–µ–∑—é–º–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ "–ò–∑–±—Ä–∞–Ω–Ω–æ–µ"

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

### 1. –ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö (Backend)

**–§–∞–π–ª:** `models/favorite.py`
- ‚úÖ –°–æ–∑–¥–∞–Ω–∞ –º–æ–¥–µ–ª—å `Favorite` —Å –ø–æ–ª—è–º–∏:
  - `id` - –ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á
  - `user_id` - —Å—Å—ã–ª–∫–∞ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - `product_id` - —Å—Å—ã–ª–∫–∞ –Ω–∞ —Ç–æ–≤–∞—Ä
  - `created_at` - –¥–∞—Ç–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã —Å–≤—è–∑–∏ —Å –º–æ–¥–µ–ª—è–º–∏ User –∏ Product
- ‚úÖ –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–ª—é—á –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ –ú–µ—Ç–æ–¥ `to_dict()` –¥–ª—è —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö

**–§–∞–π–ª—ã –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏:**
- ‚úÖ `models/__init__.py` - –¥–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç Favorite
- ‚úÖ `models/status.py` - –¥–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `to_dict()`
- ‚úÖ `models/category.py` - –¥–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `to_dict()`

### 2. API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã (Backend)

**–§–∞–π–ª:** `routes/favorites.py`
- ‚úÖ `GET /api/favorites` - –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ
- ‚úÖ `POST /api/favorites` - –¥–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ
- ‚úÖ `DELETE /api/favorites/{product_id}` - —É–¥–∞–ª–∏—Ç—å –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ
- ‚úÖ `GET /api/favorites/check/{product_id}` - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
- ‚úÖ `POST /api/favorites/toggle` - –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Å—Ç–∞—Ç—É—Å

**–§—É–Ω–∫—Ü–∏–∏:**
- ‚úÖ JWT –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –¥–ª—è –≤—Å–µ—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è

**–§–∞–π–ª –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏:**
- ‚úÖ `app.py` - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è blueprint favorites

### 3. –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ (Frontend)

**–§–∞–π–ª:** `app/profile/favorites/page.tsx`
- ‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π (–∑–∞–≥—Ä—É–∑–∫–∞, –æ—à–∏–±–∫–∞, –ø—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫)
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–µ—Ä–≤–µ—Ä–Ω—ã–º–∏ –¥–µ–π—Å—Ç–≤–∏—è–º–∏

### 4. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (Frontend)

**–§–∞–π–ª:** `components/favorites-grid.tsx`
- ‚úÖ –°–µ—Ç–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤
- ‚úÖ –ö–∞—Ä—Ç–æ—á–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
- ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∫–æ—Ä–∑–∏–Ω–æ–π (–∑–∞–≥–ª—É—à–∫–∞)

**–§–∞–π–ª:** `components/favorite-button.tsx`
- ‚úÖ –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –∫–Ω–æ–ø–∫–∞ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- ‚úÖ –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è (–¥–æ–±–∞–≤–∏—Ç—å/—É–¥–∞–ª–∏—Ç—å)
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
- ‚úÖ –†–∞–∑–ª–∏—á–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è

### 5. –î–µ–π—Å—Ç–≤–∏—è (Frontend)

**–§–∞–π–ª:** `app/actions/favorites.ts`
- ‚úÖ `getFavorites()` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞
- ‚úÖ `addToFavorites()` - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ
- ‚úÖ `removeFromFavorites()` - —É–¥–∞–ª–µ–Ω–∏–µ  
- ‚úÖ `toggleFavorite()` - –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ
- ‚úÖ `checkFavoriteStatus()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞

### 6. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

**–§–∞–π–ª:** `components/header.tsx`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –ø—É–Ω–∫—Ç "–ò–∑–±—Ä–∞–Ω–Ω–æ–µ" –≤ –º–µ–Ω—é –ø—Ä–æ—Ñ–∏–ª—è –∫–ª–∏–µ–Ω—Ç–∞

**–§–∞–π–ª:** `components/homepage-block.tsx`
- ‚úÖ –ó–∞–º–µ–Ω–µ–Ω–∞ —Å—Ç–∞—Ç–∏—á–Ω–∞—è –∫–Ω–æ–ø–∫–∞ –Ω–∞ `FavoriteButton`

**–§–∞–π–ª:** `app/category/[slug]/page.tsx`
- ‚úÖ –ó–∞–º–µ–Ω–µ–Ω–∞ —Å—Ç–∞—Ç–∏—á–Ω–∞—è –∫–Ω–æ–ø–∫–∞ –Ω–∞ `FavoriteButton`

### 7. –£—Ç–∏–ª–∏—Ç—ã –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**–§–∞–π–ª:** `create_favorites_table.py`
- ‚úÖ –°–∫—Ä–∏–ø—Ç —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü—ã –≤ –ë–î

**–§–∞–π–ª:** `FAVORITES_API_DOCS.md`
- ‚úÖ –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API
- ‚úÖ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- ‚úÖ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ

## üîß –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã –≤ –ë–î
```bash
cd PoePro_New_Site
python create_favorites_table.py
```

### –®–∞–≥ 2: –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–æ–≤
```bash
# Backend (Flask)
cd PoePro_New_Site
python app.py

# Frontend (Next.js)
cd v0_ui_shop_pospro/new_pospro_shop
npm run dev
```

## üêõ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –ü—Ä–æ–±–ª–µ–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
**–ü—Ä–æ–±–ª–µ–º–∞**: –ö–Ω–æ–ø–∫–∞ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ –≤—ã–¥–∞–≤–∞–ª–∞ –æ—à–∏–±–∫—É "–Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω" –¥–∞–∂–µ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤.

**–ü—Ä–∏—á–∏–Ω–∞**: 
1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä `@token_required`
2. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ cookie: `access_token` –≤–º–µ—Å—Ç–æ `jwt-token`
3. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è —Å—Ä–µ–¥—ã –¥–ª—è API URL

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**:
1. ‚úÖ –ó–∞–º–µ–Ω–µ–Ω `@token_required` –Ω–∞ `@jwt_required()` –∏–∑ Flask-JWT-Extended
2. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –Ω–∞–∑–≤–∞–Ω–∏–µ cookie —Å `access_token` –Ω–∞ `jwt-token`
3. ‚úÖ –ó–∞–º–µ–Ω–µ–Ω `process.env.API_BASE_URL` –Ω–∞ `getApiUrl()` –∏–∑ `@/lib/api-address`
4. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤–æ –≤—Å–µ—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞—Ö
5. ‚úÖ –°–æ–∑–¥–∞–Ω –∑–∞–ø–∞—Å–Ω–æ–π –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä –≤ `utils/jwt.py` –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏

## üéØ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### –î–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤:
1. **–ö–Ω–æ–ø–∫–∞ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ** –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–∞—Ö —Ç–æ–≤–∞—Ä–æ–≤:
   - –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (–±–ª–æ–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤)
   - –°—Ç—Ä–∞–Ω–∏—Ü—ã –∫–∞—Ç–µ–≥–æ—Ä–∏–π
   - –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤

2. **–°—Ç—Ä–∞–Ω–∏—Ü–∞ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ** –≤ –ø—Ä–æ—Ñ–∏–ª–µ:
   - –î–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ –º–µ–Ω—é –ø—Ä–æ—Ñ–∏–ª—è: "–ò–∑–±—Ä–∞–Ω–Ω–æ–µ"
   - –°–µ—Ç–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —É–¥–∞–ª–µ–Ω–∏—è
   - –ü—É—Å—Ç–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤

3. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**:
   - –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏/—É–¥–∞–ª–µ–Ω–∏–∏ –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ
   - –ü—Ä–∏ –æ—à–∏–±–∫–∞—Ö –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏–ª–∏ —Å–µ—Ç–∏

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:
- ‚úÖ JWT –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–µ–π (—Ç–æ–ª—å–∫–æ –∫–ª–∏–µ–Ω—Ç—ã)
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:
- ‚úÖ –õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ
- ‚úÖ Eager loading —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ API
- ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —É—Ä–æ–≤–Ω–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

## üì± –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç

1. **–ò–Ω—Ç—É–∏—Ç–∏–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å**: –ò–∫–æ–Ω–∫–∞ —Å–µ—Ä–¥—Ü–∞ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ –ø–æ–Ω—è—Ç–Ω–∞
2. **–û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å**: –ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –¥–µ–π—Å—Ç–≤–∏—è—Ö
3. **–°–æ—Å—Ç–æ—è–Ω–∏—è**: –í–∏–∑—É–∞–ª—å–Ω–æ–µ –æ—Ç–ª–∏—á–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤
4. **–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å**: –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö

## üîÆ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Ä–∞–∑–≤–∏—Ç–∏—è

1. **–°–ø–∏—Å–∫–∏ –∂–µ–ª–∞–Ω–∏–π**: –°–æ–∑–¥–∞–Ω–∏–µ –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã—Ö —Å–ø–∏—Å–∫–æ–≤
2. **–ü–æ–¥–µ–ª–∏—Ç—å—Å—è**: –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–¥–µ–ª–∏—Ç—å—Å—è —Å–ø–∏—Å–∫–æ–º –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ
3. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**: –û —Å–Ω–∏–∂–µ–Ω–∏–∏ —Ü–µ–Ω—ã –Ω–∞ –∏–∑–±—Ä–∞–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã
4. **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞**: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤
5. **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**: –ù–∞ –æ—Å–Ω–æ–≤–µ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ
